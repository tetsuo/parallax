!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).parallax={})}(this,(function(t){"use strict";class e{constructor(t){this.element=t,this._x=0,this._y=0,this._rotation=0,this._applyTransform()}get x(){return this._x}set x(t){this._x=t,this._applyTransform()}get y(){return this._y}set y(t){this._y=t,this._applyTransform()}get width(){return this.element.offsetWidth}get height(){return this.element.offsetHeight}rotate(t){this._rotation=t,this._applyTransform()}_applyTransform(){this.element.style.transform=`translate3d(${this._x}px, ${this._y}px, 0) rotate(${this._rotation}deg)`}}class i{constructor(t,e){this.model=t,this.zDepth=e,this.originalX=t.x,this.originalY=t.y}moveHorizontal(t){this.model.x+=t}moveHorizontalTo(t){this.model.x=t}moveHorizontalBy(t){this.model.x=this.originalX+t}moveVertical(t){this.model.y+=t}moveVerticalTo(t){this.model.y=t}moveVerticalBy(t){this.model.y=this.originalY+t}}t.DisplayObject=e,t.Layer=i,t.Scene=class{constructor(t=1,e=.5){this.layers=[],this.xSpeed=t,this.ySpeed=e,this._ticking=!1,this._boundScrollHandler=null}addLayer(t){this.layers.push(t)}addElement(t,o){const s=new e(t),l=new i(s,o);this.addLayer(l)}removeAllLayers(){this.layers.length=0}getHorizontalScrollRate(t){return this.xSpeed/t.zDepth}getVerticalScrollRate(t){return this.ySpeed/t.zDepth}updateByPosition(t,e){this.layers.forEach((i=>{i.moveHorizontalTo(t*this.getHorizontalScrollRate(i)),i.moveVerticalTo(e*this.getVerticalScrollRate(i))}))}bindToScroll(){this._boundScrollHandler||(this._boundScrollHandler=()=>{this._ticking||(this._ticking=!0,requestAnimationFrame((()=>{this.updateByPosition(window.scrollX,window.scrollY),this._ticking=!1})))},window.addEventListener("scroll",this._boundScrollHandler))}unbindFromScroll(){this._boundScrollHandler&&(window.removeEventListener("scroll",this._boundScrollHandler),this._boundScrollHandler=null)}}}));
